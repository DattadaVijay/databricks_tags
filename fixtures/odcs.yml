version: 1.0.0
kind: DataContract
apiVersion: v3.1.0

id: orders
name: Orders
status: active

description:
  purpose: "Provides order and line item data for analytics and reporting"
  usage: "Used by analytics team for sales analysis and business intelligence"
  limitations: "Contains only the last 2 years of data"

schema:
  - name: bronze_orders 
    physicalType: TABLE
    description: All historic web shop orders since 2020-01-01.
    properties:
      - name: order_id
        logicalType: string
        description: The internal order id.
        primaryKey: true
        required: true
        unique: true
      - name: customer_id
        logicalType: string
        required: true
      - name: order_total
        logicalType: integer
        required: true
      - name: order_timestamp
        logicalType: timestamp
      - name: order_status
        logicalType: string
        quality:
          - type: library
            metric: invalidValues
            arguments:
              validValues:
                - pending
                - paid
                - processing
                - shipped
                - delivered
                - cancelled
                - refunded
            mustBe: 0
    quality:
      - type: library
        metric: rowCount
        mustBeGreaterThan: 100
        description: Ensure table is not empty.

servers:
  - server: dev
    type: databricks
    host: dbc-e3761da8-7d95.cloud.databricks.com
    catalog: workspace
    schema: default 

slaProperties:
  - property: availability
    value: 99.9%
  - property: freshness
    value: "24"
    unit: hours